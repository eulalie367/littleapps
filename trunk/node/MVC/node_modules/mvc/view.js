var mustache = require("mustache"),
   url = require("url"),
	libpath = require("path"),
   fs = require("fs");


var path = "./Views/";

exports.render = function(fileName, model, callback)
{	
	fileName = libpath.resolve(path + fileName + ".mus");

	libpath.exists(fileName, function (exists)
	{
		if(exists)
		{
			fs.readFile(fileName, "binary", function (err, file)
			{
				if(err == null)
				{
					callback(mustache.to_html(file, model), false);
				}
				else
				{
					callback(err, true);
				}
			});
		}
		else
		{
			callback("", true);
		}
	});
}
