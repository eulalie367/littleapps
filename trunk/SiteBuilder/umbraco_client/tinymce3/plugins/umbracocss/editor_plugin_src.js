(function(){tinymce.PluginManager.requireLangPack("umbraco");tinymce.create("tinymce.plugins.umbracocss",{init:function(A,B){this.editor=A;A.addCommand("mceumbracosetstyle",function(){alert("blah")});A.onNodeChange.add(function(D,C,I){var H=C.get("umbracostyles");var G=false;if(H){var F=tinymce.DOM.getParent(I,tinymce.DOM.isBlock);if(F){for(var E=0;E<H.items.length;E++){if(H.items[E].value==F.nodeName.toLowerCase()){H.select(F.nodeName.toLowerCase());G=true}}}if(I.className!=""){if(H){H.select("."+I.className)}}else{if(H&&!G){H.select()}}}})},createControl:function(G,A){if(G=="umbracocss"){var F=this.editor.getParam("theme_umbraco_styles").split(";");var E=A.createListBox("umbracostyles",{title:this.editor.getLang("umbraco.style_select"),onselect:function(H){if(H==""){if(E.selectedValue.indexOf(".")==0){tinyMCE.activeEditor.execCommand("mceSetStyleInfo",0,{command:"removeformat"})}else{tinyMCE.activeEditor.execCommand("FormatBlock",false,"p")}}else{if(H.indexOf(".")!="0"){tinyMCE.activeEditor.execCommand("FormatBlock",false,H)}else{tinyMCE.activeEditor.execCommand("mceSetCSSClass",false,H.substring(1,H.length))}}return false}});for(var D=0;D<F.length;D++){if(F[D]!=""){var B=F[D].substring(0,F[D].indexOf("="));var C=F[D].substring(F[D].indexOf("=")+1,F[D].length);if(C.indexOf(".")<0){C=C.toLowerCase()}E.add(B,C)}}return E}return null},getInfo:function(){return{longname:"Umbraco CSS/Styling Plugin",author:"Umbraco",authorurl:"http://umbraco.org",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example",version:"1.0"}}});tinymce.PluginManager.add("umbracocss",tinymce.plugins.umbracocss)})();